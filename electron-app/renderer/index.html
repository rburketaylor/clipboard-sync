<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clipboard Sync</title>
    <style>
      :root {
        color-scheme: light dark;
        --accent: #1a73e8;
        /* Light theme defaults */
        --field-bg: #ffffff;
        --field-fg: #111111;
        --field-border: #00000033; /* #0003 */
        --surface-bg: #00000008;   /* subtle card tint over page bg */
      }
      @media (prefers-color-scheme: dark) {
        :root {
          /* Dark theme overrides */
          --field-bg: #1f2430;
          --field-fg: #f5f7fa;
          --field-border: #ffffff26; /* #fff4-ish but subtler */
          --surface-bg: #ffffff0f;
        }
      }
      html, body { height: 100%; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; margin: 0; overflow-x: hidden; }
      header { padding: 12px 16px; border-bottom: 1px solid #0002; display: flex; align-items: center; gap: 12px; min-width: 0; }
      main { padding: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 16px; max-width: 1100px; margin: 0 auto; box-sizing: border-box; }
      .card { border: 1px solid #0002; border-radius: 8px; padding: 12px; background: var(--surface-bg); }
      .row { display: flex; gap: 8px; align-items: center; }
      /* Ensure controls don't overflow their containers */
      input, textarea, select, button {
        font: inherit;
        padding: 8px 10px;
        border-radius: 6px;
        border: 1px solid var(--field-border);
        background: var(--field-bg);
        color: var(--field-fg);
        box-sizing: border-box;
        max-width: 100%;
        transition: background-color .15s ease, border-color .15s ease, box-shadow .15s ease, transform .06s ease;
      }
      input::placeholder, textarea::placeholder { color: color-mix(in oklab, var(--field-fg), transparent 40%); }
      textarea { width: 100%; min-height: 80px; resize: vertical; }
      /* Safer default to avoid any stray overflow */
      *, *::before, *::after { box-sizing: border-box; }
      /* Interactive affordances */
      button, select { cursor: pointer; }
      button:hover, button:focus-visible { outline: none; background: color-mix(in oklab, var(--field-bg), #000 6%); border-color: color-mix(in oklab, var(--accent), #000 20%); box-shadow: 0 1px 2px #0002, 0 0 0 2px color-mix(in oklab, var(--accent), transparent 70%); }
      button:active { transform: translateY(1px); box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent), transparent 60%) inset; }
      input:hover, textarea:hover, select:hover { border-color: color-mix(in oklab, var(--accent), #000 35%); background: color-mix(in oklab, var(--field-bg), #000 4%); }
      input:focus-visible, textarea:focus-visible, select:focus-visible { outline: none; border-color: var(--accent); box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent), transparent 70%); background: color-mix(in oklab, var(--field-bg), #000 8%); }
      /* Ensure dropdown text and menu have strong contrast */
      select { color: var(--field-fg); background-color: var(--field-bg); }
      select option { color: #111; background: #fff; }
      @media (prefers-color-scheme: dark) { select option { color: #fff; background: #222; } }
      /* Row/list hover without implying click */
      li:hover { border-color: #0003; background: #fff4; }
      ul { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; min-width: 0; }
      li { border: 1px solid #0002; border-radius: 6px; padding: 8px; background: #fff3; min-width: 0; }
      .muted { opacity: .7; }
      .actions { display: flex; gap: 8px; }
      .actions .delete {
        background: #d93025;
        border-color: color-mix(in oklab, #d93025, #000 20%);
        color: #fff;
      }
      .actions .delete:hover,
      .actions .delete:focus-visible {
        background: color-mix(in oklab, #d93025, #000 12%);
        border-color: color-mix(in oklab, #d93025, #000 30%);
        box-shadow: 0 1px 2px #0003, 0 0 0 2px color-mix(in oklab, #d93025, transparent 70%);
      }
      .actions .delete:active {
        transform: translateY(1px);
        box-shadow: 0 0 0 2px color-mix(in oklab, #d93025, transparent 55%) inset;
      }
      .badge { padding: 2px 6px; border-radius: 999px; border: 1px solid #0003; font-size: 12px; }
      footer { padding: 8px 16px; border-top: 1px solid #0002; font-size: 12px; display: flex; justify-content: space-between; max-width: 1100px; margin: 0 auto; }
      code#backend-url { display: inline-block; max-width: 40vw; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; vertical-align: bottom; }
      .clip-grid { display: grid; grid-template-columns: 1fr auto; align-items: start; gap: 12px; }
      .content-wrap { overflow-wrap: anywhere; word-break: break-word; white-space: normal; }
      @media (max-width: 900px) { main { grid-template-columns: 1fr; } }
      .divider { border: none; border-bottom: 1px dashed #0002; margin: 16px 0; }
      .clipboard-sync input[type="checkbox"] { width: 16px; height: 16px; }
    </style>
  </head>
  <body>
    <header>
      <strong>Clipboard Sync</strong>
      <span class="muted" style="min-width:0">Backend: <code id="backend-url"></code></span>
      <span style="flex:1"></span>
      <button id="refresh">Refresh</button>
    </header>
    <main>
      <section class="card">
        <h3>New Clip</h3>
        <div class="row">
          <label for="type">Type</label>
          <select id="type">
            <option value="text" selected>text</option>
            <option value="url">url</option>
          </select>
        </div>
        <div style="margin-top:8px">
          <textarea id="content" placeholder="Enter text or URLâ€¦"></textarea>
        </div>
        <div class="row" style="margin-top:8px">
          <input id="title" placeholder="Optional title" style="flex:1" />
          <button id="from-clipboard">From Clipboard</button>
          <button id="create">Create</button>
        </div>
        <hr class="divider" />
        <section aria-labelledby="clipboard-sync-heading" class="clipboard-sync">
          <h4 id="clipboard-sync-heading" class="muted" style="margin:0 0 8px; font-weight:600;">Clipboard Sync</h4>
          <div class="row" style="justify-content:space-between; flex-wrap:wrap; gap:12px;">
            <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
              <button id="send-clipboard-now">Send Clipboard Now</button>
              <label class="row" style="gap:6px; font-size:14px;">
                <input id="auto-clipboard" type="checkbox" />
                <span>Auto-send clipboard changes</span>
              </label>
            </div>
          </div>
          <p id="clipboard-status" class="muted" style="margin-top:8px; font-size:12px;">Clipboard idle</p>
        </section>
      </section>
      <section class="card">
        <h3>Recent Clips</h3>
        <ul id="clips"></ul>
      </section>
    </main>
    <footer>
      <span id="status" class="muted">Idle</span>
      <span class="muted">v1</span>
    </footer>
    <script src="renderer.js" type="module"></script>
  </body>
  </html>
